import{_ as y}from"./PageContainer-BmNquz2M.js";import{s as U,q as p,a as i,w as a,o,v as s,H as E,e as l,x as w,y as _,bO as x,E as b,I as A,aR as d,bP as B}from"./index-pqJ8gQuZ.js";import{_ as R,E as S}from"./_plugin-vue_export-helper-Cdz0xIEw.js";import{E as C}from"./el-progress-nX9411Qk.js";import"./el-message-BAI3ORy0.js";import"./isEqual-C4NBrd8Y.js";const I=["src"],N={__name:"UserAvatar",setup(V){const r=U(),t=p(r.user.user_pic),n=p(),f=c=>{const e=new FileReader;e.readAsDataURL(c.raw),e.onload=()=>{t.value=e.result}},m=async()=>{await x(t.value),await r.getUser(),b.success("头像更新成功")};return(c,e)=>{const v=A,g=C,u=S,k=y;return o(),i(k,{title:"更换头像"},{default:a(()=>[s(g,{ref_key:"uploadRef",ref:n,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":f},{default:a(()=>[t.value?(o(),E("img",{key:0,src:t.value,class:"avatar"},null,8,I)):(o(),i(v,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[s(l(d))]),_:1}))]),_:1},512),e[3]||(e[3]=w("br",null,null,-1)),s(u,{onClick:e[0]||(e[0]=q=>n.value.$el.querySelector("input").click()),type:"primary",icon:l(d),size:"large"},{default:a(()=>e[1]||(e[1]=[_("选择图片")])),_:1},8,["icon"]),s(u,{onClick:m,type:"success",icon:l(B),size:"large"},{default:a(()=>e[2]||(e[2]=[_("上传头像")])),_:1},8,["icon"])]),_:1})}}},M=R(N,[["__scopeId","data-v-ebc7013d"]]);export{M as default};
